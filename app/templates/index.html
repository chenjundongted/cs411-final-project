{% extends "base.html" %}

{% block content %}
  <body>
    <p style="text-align:center; font-family:Avenir; font-size:40px">WELCOME</p>
    {% if not user %}
      <p style="text-align:center; font-family:Avenir; font-size:20px">Please log in with your accounts.</p>
    {% else %}
      {% if user["is_admin"] %}
      <p style="text-align:center; font-family:Avenir; font-size:20px"> Hello! {{session.username}}!</p>
        <p style="text-align:center; font-family:Avenir; font-size:20px">This is an admin account. </p>
      {% else %}
        <p style="text-align:center; font-family:Avenir; font-size:20px"> Hello! {{session.username}}!</p>
        <p style="text-align:center; font-family:Avenir; font-size:20px">This is a normal account. </p>
      {% endif %}
    {% endif %}

    {% set ns = namespace(last=false) %}
    {% for airbnb_group in airbnbs | batch(3) %}
    {% set ns.last = loop.last %}
    {% if not ns.last %}
    <div class="card-group">
    {% else %}
    {% endif %}
      {% for airbnb in airbnb_group %}
      {% if ns.last %}
      <div class="no-gutters">
        <div class="col-md-4">
      {% endif %}
        <div class="card">
          <img class="card-img-top" src="{{ airbnb["image_url"] }}" alt="Image preview" height="200" width="300"/>
          <div class="card-body">
            <a href="/airbnb/{{ airbnb["_id"] }}"><h5>{{ airbnb["name"] }}</h5></a>
            Rating: {{ airbnb["rating"] }}
            <br>
            Price: ${{ airbnb["price"] }}/night
          </div>
        </div>
      {% if ns.last %}
        </div>
      </div>
      {% endif %}
      {% endfor %}
    {% if not ns.last %}
    </div>
    <br>
    {% endif %}
    {% endfor %}
  </body>
{% endblock %}
